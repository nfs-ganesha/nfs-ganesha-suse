--- nfs-ganesha-4.0/src/cmake/modules/FindNTIRPC.cmake.orig	2021-12-21 11:54:23.000000000 -0500
+++ nfs-ganesha-4.0/src/cmake/modules/FindNTIRPC.cmake	2022-01-01 17:56:47.400253002 -0500
@@ -46,15 +46,18 @@
 
 if (NOT NTIRPC_LIBRARY_DIR)
 	find_path(NTIRPC_LIBRARY_DIR
-    NAMES libntirpc.so
+    		NAMES libntirpc.so
 		PATHS ${NTIRPC_PREFIX}
-    PATH_SUFFIXES lib/${CMAKE_LIBRARY_ARCHITECTURE} lib lib64
+    		PATH_SUFFIXES lib/${CMAKE_LIBRARY_ARCHITECTURE} lib lib64
 		DOC "The NTIRPC libraries")
 endif (NOT NTIRPC_LIBRARY_DIR)
 
-find_library(NTIRPC_LIBRARY ntirpc PATHS ${NTIRPC_LIBRARY_DIR} NO_DEFAULT_PATH)
-find_library(NTIRPC_TRACEPOINTS ntirpc_tracepoints PATHS ${NTIRPC_LIBRARY_DIR} NO_DEFAULT_PATH)
-find_library(NTIRPC_LTTNG ntirpc_lttng PATHS ${NTIRPC_LIBRARY_DIR} NO_DEFAULT_PATH)
+find_library(NTIRPC_LIBRARY ntirpc
+		PATHS_SUFFIXES ${CMAKE_LIBRARY_ARCHITECTURE})
+find_library(NTIRPC_TRACEPOINTS ntirpc_tracepoints
+		PATHS_SUFFIXES ${CMAKE_LIBRARY_ARCHITECTURE})
+find_library(NTIRPC_LTTNG ntirpc_lttng
+		PATHS_SUFFIXES ${CMAKE_LIBRARY_ARCHITECTURE})
 
 set(NTIRPC_VERSION_HEADER "${NTIRPC_INCLUDE_DIR}/version.h")
 if (EXISTS ${NTIRPC_VERSION_HEADER})
--- nfs-ganesha-4.0/src/CMakeLists.txt.orig	2021-12-21 11:54:23.000000000 -0500
+++ nfs-ganesha-4.0/src/CMakeLists.txt	2022-01-01 18:12:12.321071305 -0500
@@ -558,11 +558,11 @@
 
 gopt_test(USE_ADMIN_TOOLS)
 if (USE_ADMIN_TOOLS)
-  find_package (Python COMPONENTS Interpreter Development)
-  if (NOT Python_Interpreter_FOUND)
+  find_package(PythonInterp ${USE_ADMIN_TOOLS_REQUIRED})
+  if (NOT PYTHONINTERP_FOUND)
     message(WARNING "Cannot find python. Disablin admin tools")
     set(USE_ADMIN_TOOLS OFF)
-  endif (NOT Python_Interpreter_FOUND)
+  endif (NOT PYTHONINTERP_FOUND)
 endif (USE_ADMIN_TOOLS)
 
 gopt_test(USE_GUI_ADMIN_TOOLS)
@@ -1127,6 +1127,7 @@
 
 set(NTIRPC_MIN_VERSION 4.0)
 if (USE_SYSTEM_NTIRPC)
+  set(NTIRPC_INCLUDE_DIR "/usr/include/ntirpc/")
   find_package(NTIRPC ${NTIRPC_MIN_VERSION} REQUIRED)
   if (USE_LTTNG)
     set(NTIRPC_LIBRARY ${NTIRPC_LIBRARY} ${NTIRPC_LTTNG})
--- nfs-ganesha-4-rc4/src/scripts/ganeshactl/CMakeLists.txt.orig	2021-11-17 09:22:20.860134361 -0500
+++ nfs-ganesha-4-rc4/src/scripts/ganeshactl/CMakeLists.txt	2021-11-17 09:41:47.651949504 -0500
@@ -44,7 +44,7 @@
   Ganesha/QtUI/ui_log_dialog.ui
   )
 
-if(Python_FOUND)
+if(PYTHONINTERP_FOUND)
   set(SETUP_PY_IN "${CMAKE_CURRENT_SOURCE_DIR}/setup.py.in")
   set(SETUP_PY    "${CMAKE_CURRENT_BINARY_DIR}/setup.py")
   set(OUTPUT      "${CMAKE_CURRENT_BINARY_DIR}/build/ganeshactl_timestamp")
@@ -118,7 +118,7 @@
 
   add_custom_command(
     OUTPUT ${OUTPUT}
-    COMMAND ${Python_EXECUTABLE} "${SETUP_PY}"  build
+    COMMAND ${PYTHON_EXECUTABLE} "${SETUP_PY}"  build
     COMMAND ${CMAKE_COMMAND} -E touch ${OUTPUT}
     DEPENDS ${GANESHA_SRCS} ${UI_PY_FILES} ${SCRIPTS}
     )
@@ -127,9 +127,9 @@
 
   install(
     CODE
-    "execute_process(WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR} COMMAND ${Python_EXECUTABLE} ${SETUP_PY} install --skip-build --no-compile --prefix=\$ENV{DESTDIR}${CMAKE_INSTALL_PREFIX})"
+    "execute_process(WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR} COMMAND ${PYTHON_EXECUTABLE} ${SETUP_PY} install --skip-build --no-compile --prefix=\$ENV{DESTDIR}${CMAKE_INSTALL_PREFIX})"
     )
-endif(Python_FOUND)
+endif(PYTHONINTERP_FOUND)
 
 # Man page
 set(man8_file ganesha_conf.man)
--- nfs-ganesha-4.4/src/scripts/gpfs-epoch/CMakeLists.txt.orig	2023-02-23 14:43:48.000000000 -0500
+++ nfs-ganesha-4.4/src/scripts/gpfs-epoch/CMakeLists.txt	2023-04-13 11:16:14.714691055 -0400
@@ -21,7 +21,7 @@
 #-------------------------------------------------------------------------------
 
 if(USE_FSAL_GPFS)
-  if(Python_FOUND)
+  if(PYTHONINTERP_FOUND)
     set(SETUP_PY_IN "${CMAKE_CURRENT_SOURCE_DIR}/setup.py.in")
     set(SETUP_PY    "${CMAKE_CURRENT_BINARY_DIR}/setup.py")
     set(OUTPUT      "${CMAKE_CURRENT_BINARY_DIR}/build/gpfs_epoch_timestamp")
@@ -59,7 +59,7 @@
     add_custom_command(
       OUTPUT ${OUTPUT}
       COMMAND ${CMAKE_COMMAND} -E touch __init__.py
-      COMMAND ${Python_EXECUTABLE} "${SETUP_PY}"  build
+      COMMAND ${PYTHON_EXECUTABLE} "${SETUP_PY}"  build
       COMMAND ${CMAKE_COMMAND} -E touch ${OUTPUT}
       DEPENDS ${GPFS_EPOCH_SRCS} ${SCRIPTS}
       )
@@ -68,7 +68,7 @@
 
     install(
       CODE
-      "execute_process(WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR} COMMAND ${Python_EXECUTABLE} ${SETUP_PY} install --skip-build --no-compile --prefix=\$ENV{DESTDIR}${CMAKE_INSTALL_PREFIX} --install-scripts=\$ENV{DESTDIR}${LIBEXECDIR}/ganesha)"
+      "execute_process(WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR} COMMAND ${PYTHON_EXECUTABLE} ${SETUP_PY} install --skip-build --no-compile --prefix=\$ENV{DESTDIR}${CMAKE_INSTALL_PREFIX} --install-scripts=\$ENV{DESTDIR}${LIBEXECDIR}/ganesha)"
       )
-  endif(Python_FOUND)
+  endif(PYTHONINTERP_FOUND)
 endif(USE_FSAL_GPFS)
